args=[]
args[0]="localhost:2000"
args[1]="get"
args[2]="\r\n"
require "socket"
addr=args[0].split(":")
if addr.length==1
	puts "tcp: Address must be in format host:port"
	exit
end
begin
	$server=TCPSocket.new(addr[0],addr[1])
rescue => e
	puts e
else
	puts "Connected"
end
begin
	file=File.read(args[1])
rescue => e
	puts e
end
puts file
$server.puts file
if args[2]
	$server.puts args[2]
end
while data=$server.gets
	puts data
end
$server.close